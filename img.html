<!DOCTYPE html>

<html lang="ko">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>ì´ë¯¸ì§€ ì´ë¦„ ì¼ê´„ ë³€ê²½</title>

    <style>

        body {

            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;

            padding: 20px;

            max-width: 600px;

            margin: 0 auto;

            line-height: 1.6;

        }

        #container {

            border: 1px solid #ccc;

            padding: 20px;

            border-radius: 8px;

            background-color: #f9f9f9;

        }

        h2 {

            text-align: center;

            margin-top: 0;

        }

        textarea {

            width: 100%;

            height: 150px;

            margin-bottom: 10px;

            box-sizing: border-box; /* Ensures padding doesn't affect width */

        }

        button {

            display: block;

            width: 100%;

            padding: 12px 15px;

            cursor: pointer;

            background-color: #007bff;

            color: white;

            border: none;

            border-radius: 5px;

            font-size: 16px;

        }

        button:hover {

            background-color: #0056b3;

        }

        input[type="file"] {

            margin-bottom: 15px;

        }

        p {

            margin-top: 0;

        }

    </style>

</head>

<body>



    <div id="container">

        <h2>ì´ë¯¸ì§€ ì´ë¦„ ì¼ê´„ ë³€ê²½</h2>



        <p>1. ì•„ë˜ 'ì´ë¯¸ì§€ ì„ íƒ' ë²„íŠ¼ìœ¼ë¡œ ì´ë¦„ì„ ë°”ê¿€ íŒŒì¼ë“¤ì„ ì„ íƒí•˜ì„¸ìš”.</p>

        <input type="file" id="imageFiles" multiple accept="image/*">



        <p>2. ì•„ë˜ í…ìŠ¤íŠ¸ ì˜ì—­ì— ë³€ê²½í•  íŒŒì¼ ì´ë¦„ì„ í•œ ì¤„ì— í•˜ë‚˜ì”© ì…ë ¥í•˜ì„¸ìš”.</p>

        <textarea id="newNames" placeholder="ì˜ˆì‹œ:ìƒˆë¡œìš´ ì‚¬ì§„ 1é¢¨æ™¯å†™çœŸ_002ğŸ˜„ì›ƒëŠ”ì–¼êµ´íŒŒì¼-4"></textarea>



        <button onclick="renameAndDownload()">ì´ë¦„ ë³€ê²½ ë° ë‹¤ìš´ë¡œë“œ</button>

    </div>



    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>



    <script>

        function renameAndDownload() {

            const imageFiles = document.getElementById('imageFiles').files;

            const newNamesText = document.getElementById('newNames').value;

            const newNames = newNamesText.split('\n').filter(name => name.trim() !== '');



            if (imageFiles.length === 0) {

                alert('ì´ë¯¸ì§€ íŒŒì¼ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.');

                return;

            }

            if (newNames.length === 0) {

                alert('ìƒˆë¡œìš´ íŒŒì¼ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');

                return;

            }





            const invalidNames = newNames.filter(name => name.includes('/'));

            if (invalidNames.length > 0) {

                alert('íŒŒì¼ ì´ë¦„ì— ìŠ¬ë˜ì‹œ(/)ë¥¼ í¬í•¨í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\n[ì˜¤ë¥˜ê°€ ë°œìƒí•œ ì´ë¦„]\n' + invalidNames.join('\n'));

                return;

            }



            const nameCounts = {};

            newNames.forEach(name => {

                nameCounts[name] = (nameCounts[name] || 0) + 1;

            });

            const duplicateNames = Object.keys(nameCounts).filter(name => nameCounts[name] > 1);

            if (duplicateNames.length > 0) {

                alert('íŒŒì¼ ì´ë¦„ì´ ì¤‘ë³µë˜ì—ˆìŠµë‹ˆë‹¤. ì¤‘ë³µëœ ì´ë¦„ì€ í•˜ë‚˜ë§Œ ë‚¨ê²¨ì£¼ì„¸ìš”.\n\n[ì¤‘ë³µëœ ì´ë¦„]\n' + duplicateNames.join('\n'));

                return;

            }



            const loopCount = Math.min(imageFiles.length, newNames.length);



            if (imageFiles.length !== newNames.length) {

                alert(`íŒŒì¼ ${imageFiles.length}ê°œì™€ ì´ë¦„ ${newNames.length}ê°œê°€ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.\në‘ ëª©ë¡ì˜ ê³µí†µëœ ê°œìˆ˜ì¸ ${loopCount}ê°œë§Œ ì²˜ë¦¬ë©ë‹ˆë‹¤.`);

            }



            const zip = new JSZip();



            for (let i = 0; i < loopCount; i++) {

                const file = imageFiles[i];

                const extension = file.name.slice(file.name.lastIndexOf('.'));

                const newFileName = `${newNames[i]}${extension}`;

                zip.file(newFileName, file);

            }



            zip.generateAsync({ type: 'blob' }).then(function(content) {

                saveAs(content, 'ì´ë¦„ë³€í™˜.zip');

            });

        }

    </script>



</body>

</html>




